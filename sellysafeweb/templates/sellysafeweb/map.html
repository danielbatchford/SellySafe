{% extends 'sellysafeweb/base.html' %}
{% block content %}

    <div id='map'>

    <script>

        mapboxgl.accessToken = '{{ map_box_key }}';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/dark-v10',
            zoom: 15,
            maxZoom: 18,
            minZoom: 14,
            maxPitch: 0,
            logoPosition: 'bottom-right',
            center: {{city_center}},

            maxBounds: {{ bounds|safe }},

        });
        // disable map rotation using right click + drag
        map.dragRotate.disable();

        // disable map rotation using touch rotation gesture
        map.touchZoomRotate.disableRotation();


        {% for report in reports %}

            // Create a popup
            var popup = new mapboxgl.Popup({
                    offset: 25,
                    closeButton: false,
                    closeOnClick: true,
                    })

            popup.setHTML("<p>{{ report.date }}</p><p>{{ report.type }}</p><p>{{report.contents}}</p>");

            // create marker with above popup
            var marker = new mapboxgl.Marker()
                .setPopup(popup)
                .setLngLat([{{report.long}}, {{ report.lat}}])
                .addTo(map);

        {% endfor %}

    </script>

    </div>
    <div class="container">
        <div class="card center">
            <div class="card-content">Hello</div>
        </div>
    </div>

{% endblock %}